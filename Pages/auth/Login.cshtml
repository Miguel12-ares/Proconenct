@page
@model LoginModel
@{
    ViewData["Title"] = "Iniciar Sesion";
}
<link rel="stylesheet" href="~/css/auth/login/main.css" asp-append-version="true" />
<script src="~/js/auth/validation.js" asp-append-version="true"></script>
@if (Model.AlreadyLoggedIn)
{
    <div class="login-container" style="max-width: 400px; margin: 60px auto; text-align: center;">
        <div class="alert alert-info" style="margin-bottom: 24px;">Ya tienes una sesión activa.</div>
        <div style="display: flex; flex-direction: column; gap: 12px; align-items: center;">
            <a href="/Dashboard" class="btn-login" style="width: 100%;">Ir al Dashboard</a>
            <form method="post" asp-page="/auth/Logout" style="width: 100%;">
                <button type="submit" class="btn-login" style="width: 100%; background: #e74c3c;">Cerrar sesión</button>
            </form>
        </div>
    </div>
}
else
{
    @if (!string.IsNullOrEmpty(Model.ErrorMessage) && Model.ErrorMessage.Contains("verificar tu correo"))
    {
        <div class="alert alert-warning">
            @Model.ErrorMessage <br />
            <form method="post" asp-page-handler="ResendVerification" class="mt-2">
                <input type="hidden" name="Email" value="@Model.Email" />
                <button type="submit" class="btn btn-link">Reenviar correo de verificación</button>
            </form>
        </div>
    }
    @if (!string.IsNullOrEmpty(Model.ErrorMessage))
    {
        <div class="alert alert-danger">@Model.ErrorMessage</div>
    }
    @if (!string.IsNullOrEmpty(Model.SuccessMessage))
    {
        <div class="alert alert-success">@Model.SuccessMessage</div>
    }
    <div class="login-container">
        <form method="post" class="login-form">
            <h2>Inicia Sesión en ProConnect</h2>
            <div class="form-group">
                <label for="Email">Correo Electrónico *</label>
                <input type="email" id="Email" name="Email" required />
            </div>
            <div class="form-group">
                <label for="Password">Contraseña *</label>
                <input type="password" id="Password" name="Password" required />
            </div>
            <div class="form-group form-remember">
                <label><input type="checkbox" name="RememberMe" /> Recordarme</label>
            </div>
            <div class="form-links">
                <a href="#">¿Olvidaste tu contraseña?</a>
            </div>
            <button type="submit" class="btn-login">Iniciar Sesión</button>
            <div class="form-footer">
                ¿No tienes una cuenta? <a href="/auth/Register">Regístrate aquí.</a>
            </div>
        </form>
    </div>
} 